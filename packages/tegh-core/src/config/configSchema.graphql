type HostConfig {
  id: ID!
  name: String!
  publicKey: String!
  crashReports: CrashReportConfig!
  extendedConfig: JSON!
}

type CrashReportConfig {
  id: ID!
  uploadCrashReportsToDevs: Boolean!
  extendedConfig: JSON!
}

type PrinterConfig {
  id: ID!
  printerID: ID!
  modelID: ID!

  name: String
  axes: [AxisConfig!]!
  components: [ComponentConfig!]!
  plugins: [PluginConfig!]!
  log: LogConfig!
  extendedConfig: JSON!
}

type LogConfig {
  id: ID!
  maxLength: Int!
  extendedConfig: JSON!
})

type AxisConfig {
  id: ID!
  name: String!
  feedrate: Float!
  extendedConfig: JSON!
}

union ComponentConfig =
  | SerialControllerConfig
  | ToolheadConfig
  | BuildPlatformConfig
  | FanConfig

type SerialControllerConfig {
  id: ID!
  type: String!
  interface: String!
  name: String!
  serialPortID: String!
  baudRate: Int!
  simulate: Boolean!
  extendedConfig: JSON!
}

type ToolheadConfig {
  id: ID!
  materialID: ID!
  type: String!
  name: String!
  heater: Boolean!
  feedrate: Float!
  extendedConfig: JSON!
}

type BuildPlatformConfig {
  id: ID!
  type: String!
  name: String!
  heater: Boolean!
  extendedConfig: JSON!
}

type FanConfig {
  id: ID!
  type: String!
  name: String!
  extendedConfig: JSON!
}

type PluginConfig {
  id: ID!
  macros: [String!]!
  extendedConfig: JSON!
}

input RFC6902OperationInput {
  op: String!
  path: String!
  from: String
  value: JSON
}

type Query {
  hostConfigs(hostID: ID): [HostConfig!]!
  printerConfigs(printerID: ID): [PrinterConfig!]!
  components(componentID: ID): [ComponentConfig!]!
  materials(id: ID): [Material!]!
}

type Mutation {
  # patchHostConfig(
  #   printerID: ID!,
  #   version: Int!,
  #   patch: [RFC6902OperationInput!]!
  # ) Boolean
  patchPrinterConfig(
    printerID: ID!,
    version: Int!,
    patch: [RFC6902OperationInput!]!
  ) Boolean
}
